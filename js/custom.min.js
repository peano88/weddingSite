!function(){"use strict";var o={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.Android()||o.BlackBerry()||o.iOS()||o.Opera()||o.Windows()}},a=function(e){var a=$(".navbar-nav");a.find("li").removeClass("active"),a.each(function(){$(this).find('a[data-nav-section="'+e+'"]').closest("li").addClass("active")})};function i(e){return!!$("#"+e).is(":checked")}function t(e,a){e?$("#"+a).attr("checked",!0):$("#"+a).attr("checked",!1)}var e=function(){var e,a;localStorage.getItem("dummies_mariage_user")&&localStorage.getItem("dummies_mariage_id")&&localStorage.getItem("dummies_mariage_jwt")?($("#auth").toggle(),console.log("call get guest"),e=localStorage.getItem("dummies_mariage_user"),a=localStorage.getItem("dummies_mariage_jwt"),localStorage.getItem("dummies_mariage_id"),$.ajax({type:"GET",headers:{Authorization:"Bearer "+a,Accept:"text/json"},url:"http://www.easyWedCL.tk:8090/api/guests?user_name="+e}).done(function(e){$("#invitees").val(e.invitees),$("#invitees").attr("disabled",!0),$("#modification").val(e.modification),$("#food-requirements").val(e.food_requirements),t(e.needs_accomodation,"needs_accomodation"),t(e.confirmed,"presence-yes")})):(console.log("toggle rsvp"),$("#rsvp").toggle())};document.addEventListener("DOMContentLoaded",function(){var e=$("#guest_rsvp");$(e).submit(function(e){e.preventDefault();var a,t=((a={}).invitees=$("#invitees").val(),a.modification=$("#modification").val(),a.food_requirements=$("#food-requirements").val(),a.needs_accomodation=i("needs_accomodation"),a.confirmed=i("presence-yes"),a.user_name=localStorage.getItem("dummies_mariage_user"),a.id=localStorage.getItem("dummies_mariage_id"),JSON.stringify(a));console.log("Sending");var o=localStorage.getItem("dummies_mariage_jwt"),n=localStorage.getItem("dummies_mariage_id");$.ajax({type:"PUT",headers:{Authorization:"Bearer "+o,Accept:"text/json"},url:"http://www.easyWedCL.tk:8090/api/guests/"+n,data:t}).done(function(e){console.log(e)})})});document.addEventListener("DOMContentLoaded",function(){var e=$("#login");$(e).submit(function(e){e.preventDefault();var a,t=((a={}).user_name=$("#user_name_auth").val(),a.password=$("#password_auth").val(),JSON.stringify(a));$.ajax({type:"POST",url:"http://www.easyWedCL.tk:8090/api/auth",data:t}).done(function(e){localStorage.setItem("dummies_mariage_user",e.user_name),localStorage.setItem("dummies_mariage_id",e.id),localStorage.setItem("dummies_mariage_jwt",e.jwt_token),location.reload(!0)})})}),$(function(){var t,e;$(".probootstrap-animate").waypoint(function(e){"down"!==e||$(this.element).hasClass("probootstrap-animated")||($(this.element).addClass("item-animate"),setTimeout(function(){$("body .probootstrap-animate.item-animate").each(function(e){var a=$(this);setTimeout(function(){var e=a.data("animate-effect");"fadeIn"===e?a.addClass("fadeIn probootstrap-animated"):"fadeInLeft"===e?a.addClass("fadeInLeft probootstrap-animated"):"fadeInRight"===e?a.addClass("fadeInRight probootstrap-animated"):a.addClass("fadeInUp probootstrap-animated"),a.removeClass("item-animate")},30*e,"easeInOutExpo")})},100))},{offset:"95%"}),t=0,$(window).scroll(function(){var e=$(this).scrollTop(),a=$(".probootstrap-navbar");400<e?a.addClass("scrolled"):a.removeClass("scrolled"),t<e?a.hasClass("scrolled")&&a.removeClass("awake"):a.hasClass("scrolled")&&a.addClass("awake"),t=e}),o.any()||$(window).stellar(),$('.navbar-nav a:not([class="external"])').click(function(e){var a=$(this).data("nav-section");return $(".navbar-nav"),o.any()&&$(".navbar-toggle").click(),$('[data-section="'+a+'"]').length&&$("html, body").animate({scrollTop:$('[data-section="'+a+'"]').offset().top},500,"easeInOutExpo"),e.preventDefault(),!1}),(e=$("section[data-section]")).waypoint(function(e){"down"===e&&a($(this.element).data("section"))},{offset:"150px"}),e.waypoint(function(e){"up"===e&&a($(this.element).data("section"))},{offset:function(){return-$(this.element).height()-155}}),$(".date-countdown").simplyCountdown({year:2019,month:9,day:21,hours:14,minutes:30,seconds:0}),$(".image-popup").magnificPopup({type:"image",removalDelay:300,mainClass:"mfp-with-zoom",gallery:{enabled:!0},zoom:{enabled:!0,duration:300,easing:"ease-in-out",opener:function(e){return e.is("img")?e:e.find("img")}}}),$(".with-caption").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,mainClass:"mfp-with-zoom mfp-img-mobile",image:{verticalFit:!0,titleSrc:function(e){return e.el.attr("title")+' &middot; <a class="image-source-link" href="'+e.el.attr("data-source")+'" target="_blank">image source</a>'}},zoom:{enabled:!0}}),$(".popup-youtube, .popup-vimeo, .popup-gmaps").magnificPopup({disableOn:700,type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1})}),$(window).load(function(){$(".flexslider").flexslider({animation:"fade",prevText:"",nextText:"",animationSpeed:1e3,slideshow:!0,controlNav:!1,animationLoop:!0,directionNav:!1})}),$(window).ready(function(){console.log("ready"),e()})}();